# Frontend Customization

The UI is composed of reusable widgets and basic building blocks. This guide shows how to extend or replace them safely.

## Component Layers
- `src/lib/components/ui/`: low-level controls (`Button`, `Toggle`, `Slider`, `ProgressBar`, etc.) used across the dashboard.
- `src/lib/components/widgets/`: feature widgets (`PrinterOverview`, `PrinterStatus`, `PrinterCommandCenter`) that communicate with backend endpoints.
- `src/routes/+page.svelte`: top-level coordinator that wires registry data, polling and error banners.

## Styling
- Global styles live in `src/app.css` and follow Tailwind utility classes.
- To adjust the theme, update Tailwind tokens in `tailwind.config` (generated by SvelteKit) or extend the `@apply` groups in the component styles.
- Component-level styles use `<style>` blocks with the `global` modifier sparingly; prefer Tailwind classes for consistency.

## Adding New Widgets
1. Create a Svelte file under `src/lib/components/widgets/YourWidget.svelte`.
2. Fetch data via the existing API helpers or add a new endpoint if necessary.
3. Accept props for initial data, base URLs or polling intervals so the parent can configure behavior.
4. Register the widget in `src/routes/+page.svelte` and pass down the relevant state slices.

## Modifying Existing Widgets
- Each widget exports a single `<script lang="ts">` block with clearly named helpers. Look for functions like `refreshOverview` or `dispatchScript` to understand the flow.
- Keep fetch calls inside dedicated helpers so loading states stay consistent.
- When adding fields to a widget, also update the TypeScript types in `src/lib/types/`.

## State Synchronization
- The page tracks registry state locally and synchronizes it through `/api/printer-registry` actions.
- When you add new UI state that needs persistence, expose it via the registry or create a parallel store module.

## Testing Changes
- Run `pnpm check` after structural edits to catch typing issues.
- Add browser-based smoke tests in `src/routes/page.svelte.spec.ts` (or `.js`) to cover new UI flows.
